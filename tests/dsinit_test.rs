use satellite::propagation::dsinit;

// 定义数据结构来匹配你的 JSON 文件
#[derive(Debug)]
struct TestSet {
    options: dsinit::DsInitOption,
    results: dsinit::DsInitResult,
}

#[test]
fn geopotential_resonance_for_12_hour_orbits() {
    const TEST_DATA1: TestSet = TestSet {
        options: dsinit::DsInitOption {
            argpm: 0.0,
            argpo: 3.1731953303556546,
            atime: 0.0,
            cosim: 0.8265818908073872,
            d2201: 0.0,
            d2211: 0.0,
            d3210: 0.0,
            d3222: 0.0,
            d4410: 0.0,
            d4422: 0.0,
            d5220: 0.0,
            d5232: 0.0,
            d5421: 0.0,
            d5433: 0.0,
            dedt: 0.0,
            del1: 0.0,
            del2: 0.0,
            del3: 0.0,
            didt: 0.0,
            dmdt: 0.0,
            dnodt: 0.0,
            domdt: 0.0,
            ecco: 0.5,
            eccsq: 0.25,
            em: 0.5,
            emsq: 0.25,
            gsto: 5.220883431349307,
            inclm: 0.5977892314420737,
            irez: 0,
            mdot: 0.008289877617360376,
            mm: 0.0,
            mo: 3.097818050620523,
            nm: 0.00828929401348305,
            no: 0.00828929401348305,
            nodedot: -0.0000010615465631002147,
            nodem: 0.0,
            nodeo: 5.684425672673404,
            s1: -0.0003758603820133531,
            s2: -0.00003340981173452028,
            s3: 0.000057867491395499995,
            s4: 0.00005011471760178041,
            s5: -0.0814586266145132,
            sinim: 0.5628164690103556,
            ss1: -0.0023400973145719425,
            ss2: -0.0002080086501841727,
            ss3: 0.0003602815505328084,
            ss4: 0.000312012975276259,
            ss5: -0.05506592822076295,
            sz1: 10.0266126658567,
            sz3: 11.96755448889018,
            sz11: -0.26695105200172087,
            sz13: 2.85835691924874,
            sz21: -0.10879395395455185,
            sz23: -0.9817900146669546,
            sz31: 3.2268633174603867,
            sz33: 5.297255866008874,
            t: 0.0,
            tc: 0.0,
            xfact: 0.0,
            xlamo: 0.0,
            xli: 0.0,
            xni: 0.0,
            xpidot: 4.898991347062741e-7,
            z1: 4.101694478238579,
            z3: 16.932733892867283,
            z11: 1.429557720331177,
            z13: 1.9707634473989213,
            z21: -1.4644752902058293,
            z23: 0.2884276608142515,
            z31: -0.8856293737107999,
            z33: 8.908977597159325,
        },
        results: dsinit::DsInitResult {
            argpm: 0.0,
            atime: 0.0,
            d2201: -1.2099438856510436e-11,
            d2211: 1.0011494893832913e-11,
            d3210: -5.086681199981555e-12,
            d3222: -3.9879779675343986e-13,
            d4410: 4.10948324131911e-13,
            d4422: 9.349597736749112e-14,
            d5220: 2.4097823461671757e-13,
            d5232: 1.6478747122823163e-13,
            d5421: -2.1387372659636362e-13,
            d5433: -9.311219761949575e-15,
            dedt: 6.387624124699951e-9,
            del1: 0.0,
            del2: 0.0,
            del3: 0.0,
            didt: -2.4428711570103973e-8,
            dmdt: -7.866458523057076e-8,
            dndt: 0.0,
            dnodt: -1.5869893761619698e-8,
            domdt: 3.8582690952174514e-8,
            em: 0.5,
            inclm: 0.5977892314420737,
            irez: 2,
            mm: 0.0,
            nm: 0.00828929401348305,
            nodem: 0.0,
            xfact: -0.008752188069644229,
            xlamo: 4.024902533268717,
            xli: 4.024902533268717,
            xni: 0.00828929401348305,
        },
    };
    const TEST_DATA2: TestSet = TestSet {
        options: dsinit::DsInitOption {
            argpm: 0.0,
            argpo: 3.1731953303556546,
            atime: 0.0,
            cosim: 0.8265818908073872,
            d2201: 0.0,
            d2211: 0.0,
            d3210: 0.0,
            d3222: 0.0,
            d4410: 0.0,
            d4422: 0.0,
            d5220: 0.0,
            d5232: 0.0,
            d5421: 0.0,
            d5433: 0.0,
            dedt: 0.0,
            del1: 0.0,
            del2: 0.0,
            del3: 0.0,
            didt: 0.0,
            dmdt: 0.0,
            dnodt: 0.0,
            domdt: 0.0,
            ecco: 0.9,
            eccsq: 0.81,
            em: 0.9,
            emsq: 0.81,
            gsto: 5.220883431349307,
            inclm: 0.5977892314420737,
            irez: 0,
            mdot: 0.008289882914214362,
            mm: 0.0,
            mo: 3.097818050620523,
            nm: 0.008285301381233555,
            no: 0.008285301381233555,
            nodedot: -0.000016615977679572516,
            nodem: 0.0,
            nodeo: 5.684425672673404,
            s1: -0.00034068613392845755,
            s2: -0.0000664105524227013,
            s3: 0.000057895377359053036,
            s4: 0.000025236009920626485,
            s5: -0.0814586266145132,
            sinim: 0.5628164690103556,
            ss1: -0.0021211033279095576,
            ss2: -0.00041347043429036223,
            ss3: 0.00036045516784271263,
            ss4: 0.0001571187650303376,
            ss5: -0.05506592822076295,
            sz1: 11.833656123634515,
            sz3: 14.934017773855151,
            sz11: -0.559025056566349,
            sz13: 6.1122684947234225,
            sz21: -0.012026488033904603,
            sz23: -0.41905685490385947,
            sz31: 3.2268633174603867,
            sz33: 5.297255866008874,
            t: 0.0,
            tc: 0.0,
            xfact: 0.0,
            xlamo: 0.0,
            xli: 0.0,
            xni: 0.0,
            xpidot: 0.000007654165958004881,
            z1: 3.6057420289605315,
            z3: 21.9217613472765,
            z11: 3.1143324610298544,
            z13: 4.157342147158473,
            z21: -0.4580055602764077,
            z23: -0.042575346093936206,
            z31: -0.8856293737107999,
            z33: 8.908977597159325,
        },
        results: dsinit::DsInitResult {
            argpm: 0.0,
            atime: 0.0,
            d2201: -2.077922237635543e-11,
            d2211: 8.354974473880257e-11,
            d3210: -7.971713322895552e-11,
            d3222: -1.5879563982136425e-11,
            d4410: 1.575743786950506e-11,
            d4422: 7.56868465456182e-12,
            d5220: 3.642159807380104e-11,
            d5232: 6.0905980525896e-11,
            d5421: -4.636775124768956e-11,
            d5433: -5.740323981213709e-12,
            dedt: 5.789849295568645e-9,
            del1: 0.0,
            del2: 0.0,
            del3: 0.0,
            didt: -1.0389979451500435e-7,
            dmdt: -9.517687076400692e-8,
            dndt: 0.0,
            dnodt: -1.3136567693239499e-8,
            domdt: 2.3681689509031805e-8,
            em: 0.9,
            inclm: 0.5977892314420737,
            irez: 2,
            mm: 0.0,
            nm: 0.008285301381233555,
            nodem: 0.0,
            xfact: -0.00877931004840709,
            xlamo: 4.024902533268717,
            xli: 4.024902533268717,
            xni: 0.008285301381233555,
        },
    };

    assert_eq!(dsinit::dsinit(TEST_DATA1.options), TEST_DATA1.results);
    assert_eq!(dsinit::dsinit(TEST_DATA2.options), TEST_DATA2.results);
}
